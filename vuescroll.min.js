/*
 * @name: vuescroll 3.1.5
 * @author: wangyi
 * @description: A virtual scrollbar based on vue.js 2.x inspired by slimscroll
 * @license: MIT
 * @GitHub: https://github.com/wangyi7099/vuescroll
 */
!function(t,o){"function"==typeof define&&define.amd?define(o):"undefined"!=typeof module?module.exports=o():t.Vue.use(o())}(this,function(){var t={install:function(t){t.component(a.name,a),t.component(i.name,i),t.component(n.name,n),t.component(h.name,h),t.component(s.name,s),t.component(l.name,l),t.component(c.name,c),t.prototype.$vuescrollConfig={scrollContent:{height:"100%",padding:!1,boxSizing:"border-box"},vRail:{width:"5px",pos:"left",railBackground:"#a5d6a7",railOpacity:0},vBar:{width:"5px",background:"#4caf50",deltaY:30,keepShow:!1,opacity:1,pos:"left"},hRail:{height:"5px",pos:"bottom",railBackground:"#a5d6a7",railOpacity:0},hBar:{height:"5px",background:"#4caf50",keepShow:!1,opacity:1}}}};function o(t,o){return window.getComputedStyle(t).getPropertyValue(o)}function e(t){var o={};for(var e in t)o[e]="object"==typeof t[e]?deepCoyp(t[e]):t[e];return o}function r(t,o){for(var l in t){if("object"==typeof t[l])o[l]||(o[l]={}),r(e(t[l]),o[l]);else o[l]=t[l]}}var l={name:"vueScrollPanel",render:function(t){var o=this;return t("div",{style:{overflow:"scroll",marginRight:"-17px",marginBottom:"-17px",height:"calc(100% + 17px)"},class:"vueScrollPanel",on:{scroll:function(t){o.$emit("scrolling",t)}}},this.$slots.default)}},s={name:"vuesSrollContent",render:function(t){return t("div",{style:this.ops,class:"vuesSrollContent"},this.$slots.default)},props:{ops:{}}},a={name:"vRail",render:function(t){var o=this,e={position:"absolute",top:0,height:"100%",width:o.ops.width,background:o.ops.railBackground,opacity:o.ops.railOpacity,borderRadius:"4px"};return"right"==o.ops.pos?e.right=0:e.left=0,t("div",{style:e,on:{click:function(t){o.$emit("scrollContentByBar",t,"vScrollbar")}}},this.$slots.default)},props:{ops:{width:{default:"5px"},pos:{default:"left"},railBackground:{default:"#a5d6a7"},opacity:{default:"0.5"}}}},i={name:"vScrollbar",computed:{computedTop(){return 100*this.state.top},computedHeight(){return 100*this.state.height}},render:function(t){var o=this,e={position:"absolute",top:0,height:o.computedHeight+"%",width:o.ops.width,background:o.ops.background,borderRadius:"4px",transform:"translateY("+o.computedTop+"%)",transition:"opacity .5s",cursor:"pointer",opacity:o.state.opacity,userSelect:"none"};return"right"==o.ops.pos?e.right=0:e.left=0,t("div",{style:e,class:"vScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"left",width:"5px"}},state:{default:{top:{default:0},height:{default:0},opacity:{default:0}}}}},n={name:"hRail",render:function(t){var o=this,e={position:"absolute",left:0,width:"100%",height:o.ops.height,background:o.ops.railBackground,opacity:o.ops.railOpacity,borderRadius:"4px"};return"top"==o.ops.pos?e.top=0:e.bottom=0,t("div",{style:e,on:{click:function(t){o.$emit("scrollContentByBar",t,"hScrollbar")}}},this.$slots.default)},props:{ops:{height:{default:"5px"},pos:{default:"bottom"},railBackground:{default:"#a5d6a7"},opacity:{default:"0.5"}}}},h={name:"hScrollbar",computed:{computedLeft(){return 100*this.state.left},computedWidth(){return 100*this.state.width}},render:function(t){var o=this,e={position:"absolute",width:o.computedWidth+"%",height:o.ops.height,background:o.ops.background,borderRadius:"4px",transform:"translateX("+o.computedLeft+"%)",transition:"opacity .5s",cursor:"pointer",opacity:o.state.opacity,userSelect:"none"};return"top"==o.ops.pos?e.top=0:e.bottom=0,t("div",{style:e,class:"hScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"bottom",height:"5px"}},state:{default:{left:{default:0},width:{default:0},opacity:{default:0}}}}},c={name:"vueScroll",data:()=>({scrollPanel:{el:"",ops:{}},scrollContent:{ops:{}},vRail:{ops:{}},vScrollbar:{el:"",ops:{},state:{top:0,height:0,opacity:0}},hRail:{ops:{}},hScrollbar:{el:"",ops:{},state:{left:0,width:0,opacity:0,pos:"bottom"}},listeners:[],mousedown:!1,isMouseLeavePanel:!0}),render:function(t){var o=this;return t("div",{class:"vueScroll",style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},on:{mouseenter:function(){o.isMouseLeavePanel=!1,o.showBar()},mouseleave:function(){o.isMouseLeavePanel=!0,o.hideBar()},mousemove:function(){o.isMouseLeavePanel=!1,o.showBar()}}},[t("vueScrollPanel",{ref:"vueScrollPanel",porps:{},on:{scrolling:o.scroll}},[t("vuesSrollContent",{props:{ops:o.scrollContent.ops}},o.$slots.default)]),t("vRail",{props:{ops:o.vRail.ops},on:{scrollContentByBar:o.scrollContentByBar}}),t("vScrollbar",{props:{ops:o.vScrollbar.ops,state:o.vScrollbar.state},ref:"vScrollbar"}),t("hRail",{props:{ops:o.hRail.ops},on:{scrollContentByBar:o.scrollContentByBar}}),t("hScrollbar",{props:{ops:o.hScrollbar.ops,state:o.hScrollbar.state},ref:"hScrollbar"})])},created(){var t={};r(this.$vuescrollConfig,t),this.scrollContent.ops=t.scrollContent,this.vRail.ops=t.vRail,this.vScrollbar.ops=t.vBar,this.hRail.ops=t.hRail,this.hScrollbar.ops=t.hBar},mounted(){this.initEl(),this.mergeAll(),this.initBarDrag(),this.listenPanelTouch(),this.showBar()},methods:{initEl(){this.scrollPanel.el=this.$refs.vueScrollPanel&&this.$refs.vueScrollPanel.$el,this.vScrollbar.el=this.$refs.vScrollbar&&this.$refs.vScrollbar.$el,this.hScrollbar.el=this.$refs.hScrollbar&&this.$refs.hScrollbar.$el},mergeAll(){if(this.merge(this.ops.vBar,this.vScrollbar.ops),this.merge(this.ops.hBar,this.hScrollbar.ops),this.merge(this.ops.vBar,this.vRail.ops),this.merge(this.ops.hBar,this.hRail.ops),this.merge(this.scrollContentStyle,this.scrollContent.ops,!1),this.scrollContent.ops.padding){var t=[],o=[];"left"==this.vRail.ops.pos?t.push("paddingLeft"):t.push("paddingRight"),o.push(this.vRail.ops.width),this.scrollContent.ops[t[0]]=o[0]}},merge(t,o,e){if(!1===e)for(var l in t)this.$set(o,l,t[l]);else r(t,o)},initBarDrag(){var t=this.listenBarDrag("vScrollbar"),o=this.listenBarDrag("hScrollbar");t(),o()},getBarPropertyValue(t,o,e){var r=o/e;return(e<=o||Math.abs(o-e)<=this.accuracy)&&(r=0),r},adjustBarPos:(t,o,e,r)=>parseFloat(e/o),showBar(){this.showVBar(),this.showHBar()},hideBar(){this.hideVBar(),this.hideHBar()},showVBar(){if(!this.isMouseLeavePanel||this.vScrollbar.ops.keepShow||this.mousedown){var t=Math.floor(o(this.scrollPanel.el,"height").replace("px",""))-17,e=Math.floor(this.scrollPanel.el.scrollHeight),r=Math.floor(this.scrollPanel.el.scrollTop);(this.vScrollbar.state.height=this.getBarPropertyValue("vScrollbar",t,e))&&(this.vScrollbar.state.top=this.adjustBarPos(this.vScrollbar.state.height,t-0,r,e),this.vScrollbar.state.opacity=this.vScrollbar.ops.opacity)}},showHBar(){if(!this.isMouseLeavePanel||this.vScrollbar.ops.keepShow||this.mousedown){var t=Math.floor(o(this.scrollPanel.el,"width").replace("px","")),e=Math.floor(this.scrollPanel.el.scrollWidth),r=Math.floor(this.scrollPanel.el.scrollLeft);(this.hScrollbar.state.width=this.getBarPropertyValue("hScrollbar",t,e))&&(this.hScrollbar.state.left=this.adjustBarPos(this.vScrollbar.state.width,t-0,r,e),this.hScrollbar.state.opacity=this.hScrollbar.ops.opacity)}},hideVBar(){this.vScrollbar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.vScrollbar.state.opacity=0)},hideHBar(){this.hScrollbar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.hScrollbar.state.opacity=0)},scroll(t){this.showBar()},scrollBar:function(t,e){var r="vScrollbar"==e?"top":"left",l="vScrollbar"==e?"Top":"Left",s="vScrollbar"==e?"height":"width",a="vScrollbar"==e?"Height":"Width",i="vScrollbar"==e?"vscroll":"hscroll",n="vScrollbar"==e?"showVBar":"showHBar",h=(this[e].state[r],o(this.scrollPanel.el,s).replace("px",""));"vScrollbar"==e&&(h-=17);var c=this.scrollPanel.el["scroll"+a],p=this.scrollPanel.el["scroll"+l],u=(this[e].state[s],Math.round(p+t));t<0?this.scrollPanel.el["scroll"+l]=Math.max(0,u):t>0&&(this.scrollPanel.el["scroll"+l]=Math.min(c-h,u)),this[n]();var d,v={},f={};v.residual=c-u-h,v.scrolled=u,f.scrolled=this[e].state[r],f.residual=v.residual/c*h,f[s]=this[e].state[s]*h,d=u/(c-h),f.name=e,v.name="content",this.$emit(i,f,v,d)},_scrollContent(t,e){var r="vScrollbar"==e?"height":"width",l="vScrollbar"==e?"Height":"Width",s=o(this.scrollPanel.el,r).replace("px","")-17;"vScrollbar"==e&&(s-=17);var a=this.scrollPanel.el["scroll"+l]*(t/s);this.scrollBar(a,e)},scrollContentByBar(t,o){var e="vScrollbar"===o?"y":"x",r=this[o].el.getBoundingClientRect(),l=t[e]-r[e]-r.height/2;this._scrollContent(l,o)},listenBarDrag:function(t){var o=this,e="vScrollbar"===t?"pageY":"pageX",r="vScrollbar"===t?"VBar":"HBar";return function(){var l,s;function a(a){var i=(s=a[e])-l;o["show"+r](),o._scrollContent(i,t),l=s}function i(t){t.stopPropagation(),o.mousedown=!0,l=t[e],o["show"+r](),document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(t){o.mousedown=!1,o["hide"+r](),document.removeEventListener("mousemove",a)})}o.listeners.push({dom:o[t].el,event:i,type:"mousedown"}),o[t].el.addEventListener("mousedown",i)}},listenPanelTouch:function(){var t=this,o=this.scrollPanel.el;function e(e){e.touches.length&&(e.stopPropagation(),t.mousedown=!0,t.showBar(),o.addEventListener("touchend",function(o){t.mousedown=!1,t.hideBar()}))}o.addEventListener("touchstart",e),t.listeners.push({dom:o,event:e,type:"touchstart"})}},beforeDestroy:function(){this.listeners.forEach(function(t){t.dom.removeEventListener(t.type,t.event)})},props:{ops:{default:function(){return{vBar:{},hBar:{}}}},scrollContentStyle:{default:function(){return{height:"100%"}}},accuracy:{default:5}}};return t});
/*
    * @name: vuescroll 3.3.2
    * @author: (c) 2018-2018 wangyi7099
    * @description: A virtual scrollbar based on vue.js 2.x inspired by slimscroll
    * @license: MIT
    * @GitHub: https://github.com/wangyi7099/vuescroll
    */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],o):t.vuescroll=o(t.Vue)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var o={name:"vRail",render:function(t){var o=this,e={position:"absolute",top:0,height:"100%",width:o.ops.width,background:o.ops.background,opacity:o.ops.opacity,borderRadius:"4px"};return"right"==o.ops.pos?e.right=0:e.left=0,t("div",{style:e,on:{click:function(t){o.$emit("scrollContentByBar",t,"vScrollbar")}}},this.$slots.default)},props:{ops:{width:{default:"5px"},pos:{default:"left"},background:{default:"#a5d6a7"},opacity:{default:"0.5"}}}},e={name:"vScrollbar",computed:{computedTop(){return 100*this.state.top},computedHeight(){return 100*this.state.height}},render:function(t){var o=this,e={position:"absolute",top:0,height:o.computedHeight+"%",width:o.ops.width,background:o.ops.background,borderRadius:"4px",transform:"translateY("+o.computedTop+"%)",transition:"opacity .5s",cursor:"pointer",opacity:o.state.opacity,userSelect:"none"};return"right"==o.ops.pos?e.right=0:e.left=0,t("div",{style:e,class:"vScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"left",width:"5px"}},state:{default:{top:{default:0},height:{default:0},opacity:{default:0}}}}},s={name:"hRail",render:function(t){var o=this,e={position:"absolute",left:0,width:"100%",height:o.ops.height,background:o.ops.background,opacity:o.ops.opacity,borderRadius:"4px"};return"top"==o.ops.pos?e.top=0:e.bottom=0,t("div",{style:e,on:{click:function(t){o.$emit("scrollContentByBar",t,"hScrollbar")}}},this.$slots.default)},props:{ops:{height:{default:"5px"},pos:{default:"bottom"},background:{default:"#a5d6a7"},opacity:{default:"0.5"}}}},a={name:"hScrollbar",computed:{computedLeft:function(){return 100*this.state.left},computedWidth:function(){return 100*this.state.width}},render:function(t){var o=this,e={position:"absolute",width:o.computedWidth+"%",height:o.ops.height,background:o.ops.background,borderRadius:"4px",transform:"translateX("+o.computedLeft+"%)",transition:"opacity .5s",cursor:"pointer",opacity:o.state.opacity,userSelect:"none"};return"top"==o.ops.pos?e.top=0:e.bottom=0,t("div",{style:e,class:"hScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"bottom",height:"5px"}},state:{default:{left:{default:0},width:{default:0},opacity:{default:0}}}}},r={name:"vueScrollContent",render:function(t){var o=this;return o.state.style.height=o.ops.height,t(o.ops.tag,{style:o.state.style,class:"vueScrollContent",props:o.ops.props,attrs:o.ops.attrs},this.$slots.default)},props:{ops:{},state:{}}},i={name:"vueScrollPanel",render:function(t){var o=this;return t("div",{style:{overflow:"scroll",marginRight:"-17px",height:"calc(100% + 17px)"},class:"vueScrollPanel",on:{scroll:function(t){o.$emit("scrolling",t)},wheel:function(t){o.$emit("wheeling",t)}}},this.$slots.default)}};function l(t,o){return window.getComputedStyle(t).getPropertyValue(o)}function n(t,o){for(var e in o="object"==typeof o&&o||{},t)o[e]="object"==typeof t[e]?n(t[e],o[e]={}):t[e];return o}function h(t,o){for(var e in t)"object"==typeof t[e]?o[e]?h(t[e],o[e]):(o[e]={},n(t[e],o[e])):o[e]||(o[e]=t[e]);return o}function p(t,o,e){Object.defineProperty(t,o,{get:function(){return e[o]}})}var c={scrollContent:{tag:"div",padding:!0,height:"100%",props:{},attrs:{}},vRail:{width:"5px",pos:"left",background:"#a5d6a7",opacity:0},vBar:{width:"5px",pos:"left",background:"#4caf50",deltaY:100,keepShow:!1,opacity:1},hRail:{height:"5px",pos:"bottom",background:"#a5d6a7",opacity:0},hBar:{height:"5px",pos:"bottom",background:"#4caf50",keepShow:!1,opacity:1}},u={name:"vueScroll",data:function(){return{scrollPanel:{el:""},scrollContent:{state:{style:{minHeight:"100%",boxSizing:"border-box"}}},vRail:{},vScrollbar:{el:"",state:{top:0,height:0,opacity:0}},hRail:{},hScrollbar:{el:"",state:{left:0,width:0,opacity:0,pos:"bottom"}},listeners:[],mousedown:!1,isMouseLeavePanel:!0,isWheeling:!1}},render:function(t){var o=this;return t("div",{class:"vueScroll",style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},on:{mouseenter:function(){o.isMouseLeavePanel=!1,o.showBar()},mouseleave:function(){o.isMouseLeavePanel=!0,o.hideBar()},mousemove:function(){o.isMouseLeavePanel=!1,o.showBar()}}},[t("vueScrollPanel",{ref:"vueScrollPanel",porps:{},on:{scrolling:o.scroll,wheeling:o.wheel}},[t("vueScrollContent",{props:{ops:o.ops.scrollContent,state:o.scrollContent.state}},o.$slots.default)]),t("vRail",{props:{ops:o.ops.vRail},on:{scrollContentByBar:o.scrollContentByBar}}),t("vScrollbar",{props:{ops:o.ops.vBar,state:o.vScrollbar.state},ref:"vScrollbar"}),t("hRail",{props:{ops:o.ops.hRail},on:{scrollContentByBar:o.scrollContentByBar}}),t("hScrollbar",{props:{ops:o.ops.hBar,state:o.hScrollbar.state},ref:"hScrollbar"})])},mounted:function(){this.initEl(),this.initPadding(),this.initBarDrag(),this.listenPanelTouch(),this.showBar()},methods:{initEl:function(){this.scrollPanel.el=this.$refs.vueScrollPanel&&this.$refs.vueScrollPanel.$el,this.vScrollbar.el=this.$refs.vScrollbar&&this.$refs.vScrollbar.$el,this.hScrollbar.el=this.$refs.hScrollbar&&this.$refs.hScrollbar.$el},initPadding:function(){if(this.ops.scrollContent.padding){var t=[],o=[];"left"==this.ops.vRail.pos?t.push("paddingLeft"):t.push("paddingRight"),o.push(this.ops.vRail.width),this.scrollContent.state.style[t[0]]=o[0]}},initBarDrag:function(){var t=this.listenBarDrag("vScrollbar"),o=this.listenBarDrag("hScrollbar");t(),o()},getBarPropertyValue:function(t,o,e){var s=o/e;return(e<=o||Math.abs(o-e)<=this.accuracy)&&(s=0),s},adjustBarPos:function(t,o,e,s){return parseFloat(e/o)},showBar:function(){this.showVBar(),this.showHBar()},hideBar:function(){this.hideVBar(),this.hideHBar()},showVBar:function(){if(!this.isMouseLeavePanel||this.ops.vBar.keepShow||this.mousedown){var t=Math.floor(l(this.scrollPanel.el,"height").replace("px","")),o=Math.floor(this.scrollPanel.el.scrollHeight),e=Math.floor(this.scrollPanel.el.scrollTop);(this.vScrollbar.state.height=this.getBarPropertyValue("vScrollbar",t,o))&&(this.vScrollbar.state.top=this.adjustBarPos(this.vScrollbar.state.height,t-0,e,o),this.vScrollbar.state.opacity=this.ops.vBar.opacity)}},showHBar:function(){if(!this.isMouseLeavePanel||this.ops.hBar.keepShow||this.mousedown){var t=Math.floor(l(this.scrollPanel.el,"width").replace("px","")),o=Math.floor(this.scrollPanel.el.scrollWidth),e=Math.floor(this.scrollPanel.el.scrollLeft);(this.hScrollbar.state.width=this.getBarPropertyValue("hScrollbar",t,o))&&(this.hScrollbar.state.left=this.adjustBarPos(this.vScrollbar.state.width,t-0,e,o),this.hScrollbar.state.opacity=this.ops.hBar.opacity)}},hideVBar:function(){this.ops.vBar.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.vScrollbar.state.opacity=0)},hideHBar:function(){this.ops.hBar.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.hScrollbar.state.opacity=0)},wheel:function(t){var o=this.ops.vBar.deltaY;this.isWheeling=!0,this.showVBar(),this.scrollBar(t.deltaY>0?o:-o,"vScrollbar"),t.preventDefault(),t.stopPropagation()},scroll:function(t){if(this.isWheeling)return t.preventDefault(),void(this.isWheeling=!1);this.showBar()},scrollBar:function(t,o){var e="vScrollbar"==o?"top":"left",s="vScrollbar"==o?"Top":"Left",a="vScrollbar"==o?"height":"width",r="vScrollbar"==o?"Height":"Width",i="vScrollbar"==o?"vscroll":"hscroll",n="vScrollbar"==o?"showVBar":"showHBar",h=(this[o].state[e],l(this.scrollPanel.el,a).replace("px",""));"vScrollbar"==o&&(h=h);var p=this.scrollPanel.el["scroll"+r],c=this.scrollPanel.el["scroll"+s],u=(this[o].state[a],Math.round(c+t));t<0?this.scrollPanel.el["scroll"+s]=Math.max(0,u):t>0&&(this.scrollPanel.el["scroll"+s]=Math.min(p-h,u)),this[n]();var d,f={},v={};u=this.scrollPanel.el["scroll"+s],f.residual=p-u-h,f.scrolled=u,v.scrolled=this[o].state[e],v.residual=f.residual/p*h,v[a]=this[o].state[a]*h,d=u/(p-h),v.name=o,f.name="content",this.$emit(i,v,f,d)},_scrollContent:function(t,o){var e="vScrollbar"==o?"height":"width",s="vScrollbar"==o?"Height":"Width",a=l(this.scrollPanel.el,e).replace("px","");"vScrollbar"==o&&(a=a);var r=this.scrollPanel.el["scroll"+s]*(t/a);this.scrollBar(r,o)},scrollContentByBar:function(t,o){var e="vScrollbar"===o?"y":"x",s=this[o].el.getBoundingClientRect(),a=t[e]-s[e]-s.height/2;this._scrollContent(a,o)},listenBarDrag:function(t){var o=this,e="vScrollbar"===t?"pageY":"pageX",s="vScrollbar"===t?"VBar":"HBar";return function(){var a,r;function i(i){var l=(r=i[e])-a;o["show"+s](),o._scrollContent(l,t),a=r}function l(t){t.stopPropagation(),o.mousedown=!0,a=t[e],o["show"+s](),document.addEventListener("mousemove",i),document.addEventListener("mouseup",function(t){o.mousedown=!1,o["hide"+s](),document.removeEventListener("mousemove",i)})}o.listeners.push({dom:o[t].el,event:l,type:"mousedown"}),o[t].el.addEventListener("mousedown",l)}},listenPanelTouch:function(){var t=this,o=this.scrollPanel.el;function e(e){e.touches.length&&(e.stopPropagation(),t.mousedown=!0,t.showBar(),o.addEventListener("touchend",function(o){t.mousedown=!1,t.hideBar()}))}o.addEventListener("touchstart",e),t.listeners.push({dom:o,event:e,type:"touchstart"})}},beforeCreate:function(){this.$options.propsData.ops=this.$options.propsData.ops||{},h(h(c,{}),this.$options.propsData.ops),p(this.$options.propsData.ops.vBar,"pos",this.$options.propsData.ops.vRail),p(this.$options.propsData.ops.vBar,"width",this.$options.propsData.ops.vRail),p(this.$options.propsData.ops.hBar,"pos",this.$options.propsData.ops.hRail),p(this.$options.propsData.ops.hBar,"height",this.$options.propsData.ops.hRail)},beforeUpdate(){this.$options.propsData.ops=this.$options.propsData.ops||{},h(h(c,{}),this.$options.propsData.ops),p(this.$options.propsData.ops.vBar,"pos",this.$options.propsData.ops.vRail),p(this.$options.propsData.ops.vBar,"width",this.$options.propsData.ops.vRail),p(this.$options.propsData.ops.hBar,"pos",this.$options.propsData.ops.hRail),p(this.$options.propsData.ops.hBar,"height",this.$options.propsData.ops.hRail)},beforeDestroy:function(){this.listeners.forEach(function(t){t.dom.removeEventListener(t.type,t.event)})},updated:function(){this.showBar(),this.hideBar()},props:{ops:{default:function(){var t=h(c,{});return t.vBar.pos=t.vRail.pos,t.vBar.width=t.vRail.width,t.hBar.pos=t.hRail.pos,t.hBar.height=t.hRail.height,t}},accuracy:{default:5}}},d={install:function(t){t.component(o.name,o),t.component(e.name,e),t.component(s.name,s),t.component(a.name,a),t.component(r.name,r),t.component(i.name,i),t.component(u.name,u),t.prototype.$vuescrollConfig=c}};return void 0!==t&&t.use(d),d});